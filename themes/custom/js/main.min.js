!function(a,b,c){"use strict";var d="ajax_plugin_version_2.0";a.ajax_plugin=function(b,c){var e,f,g,h,i,j,k,l,m,n,o,p={ajax_link_class:"ajax-link",ajax_container:"ajax-container",animation_layer:"animation-layer",source_id:"ajax-source",animation_enter:"anim-enter",animation_leave:"anim-leave",plugin_page_class_name:"Unit",initialise_javascript_dependencies:null,load_page_callback:null,page_loaded_callback:null,start_animation_callback:null,end_animation_callback:null,child_list:null,nav_next_frame:null,nav_prev_frame:null,url:null,abs_link:null,root:null,freezable_content:[]},q=this,r=!1,s=!1,t=!1,u=!1,v=!0,w=[];q.settings={};var x=a(b),b=b,y=x.data(d+"-opts");q.init=function(){q.settings=a.extend({},p,c,y),console.log("initialised plugin "+d),x.css("position","relative"),ba(),i=a("."+q.settings.ajax_container),q.settings.child_list?I():console.log("no child list found"),z()},q.get_current_index=function(){return n};var z=function(){C(),A(),G(k,s,i)},A=function(){M(k),t||(s=!1),D(),B(),k=k.replace("#","")},B=function(){l=Q(l)},C=function(){j=window.location.href,t?l=k:(k=j,T(k)?(l=k.replace("#","/"),O(k)):l=k),Y(l)},D=function(){for(var b=w.length;b-- >0;){var c=F(w[b]);if(null!=c){if(c.className==q.settings.plugin_page_class_name){var d=t?"/":"http://";o=t?"/":"http://";for(var e=0;e<w.length;e++)e<=b&&(d+=w[e]+"/"),o+=w[e]+"/";k=d,E();break}i=a("."+q.settings.ajax_container),s=!!t}else console.log("page null")}},E=function(){var b=_(1);t?o==k?(u=!0,s=!0,o=b.link):(u=!1,s=!0,i=a(".ajax-box"),k=o):o==k?(u=!0,s=!1,i=a("."+q.settings.ajax_container),o=b.link):(u=!0,i=a("."+q.settings.ajax_container),s=!1)},F=function(a){for(var b=null,c=0;c<m.length;c++)a==m[c].name&&(b=m[c]);return b},G=function(b,c,d){t=!1,W(),aa(q.settings.load_page_callback);var e=d.find("."+q.settings.animation_layer);e.removeClass("style"),a.ajax(b).done(function(a){aa(q.settings.page_loaded_callback),X(d,e,a,c,b)}).fail(function(a){alert("Error: "+a.responseText)})},H=function(a,b,c){aa(q.settings.start_animation_callback),V();var d=c.find("."+q.settings.animation_leave),e=c.find("."+q.settings.animation_enter),f=c.find("."+q.settings.animation_layer);if(f.addClass("running"),b){var g=parseInt(a.attr("sort")),h=parseInt(e.attr("sort")),i=c.find(".trans-page-info").attr("inc"),j=c.find(".trans-page-info").attr("dec");console.log("previous_sort_value: "+g),console.log("current_sort_value: "+h);var k=g<h?i:j;f.addClass(k)}else f.addClass("no-animation");d.attr("style",a.attr("style")),e.attr("style",a.attr("style")),d.html(a.html()),d.css_animation_event_listener(f)},I=function(){e=q.settings.child_list.find("li"),f=e.length;var b=q.settings.child_list;m=[],b.find("li").each(function(){var b=a(this);m.push(fa(b.attr("pageID"),b.index()+1,b.attr("parentID"),b.attr("className"),b.attr("title"),S(b.attr("link"))))})},J=function(){setTimeout(function(){a("."+q.settings.ajax_container);a(".animation-layer").css({width:"100%",height:"auto",top:0,left:0})},100)},K=function(a){var b=n;g=a.find("."+q.settings.nav_next_frame),h=a.find("."+q.settings.nav_prev_frame),g.add_click_navigation(),h.add_click_navigation(),L(),0==b&&h.css("display","none"),b==f-1&&g.css("display","none"),h.attr("href",e.eq(b-1).attr("link")),g.attr("href",e.eq(b+1).attr("link"))},L=function(){h.css("display","block"),g.css("display","block")},M=function(a){a=a.replace("#","/");var b=a.split("/");w=[];for(var c=0;c<b.length;c++)b[c].indexOf("http")===-1&&""!=b[c]&&w.push(b[c])},N=function(){var a=q.settings.root.split("/");return a[a.length-1]==w[w.length-1]},O=function(b){var c=b.substr(b.indexOf("#")+1);e.each(function(){c==P(a(this).attr("link"))&&(n=a(this).index())})},P=function(a){return a=S(a),a.substr(a.lastIndexOf("/")+1)},Q=function(a){a=S(a);var b="";return N()||(b=R(a)),b},R=function(a){for(var b="",c=a.split("/"),d="/",e=0;e<c.length;e++){var f="/";c[e]==q.settings.root&&(f="#"),e==c.length-1&&(f=""),c[e].indexOf("http")!==-1&&(c[e]="http:/",d=""),""!=c[e]&&(b+=c[e]+f)}return d+b},S=function(a){return"/"==a.substr(-1)&&(a=a.substr(0,a.length-1)),a},T=function(a){return a.indexOf("#")!=-1},U=function(){console.log(d+" - animation finished"),u&&$(),J()},V=function(){console.log(d+" - start animation")},W=function(){console.log(d+" - loading page"),r=!0},X=function(a,b,c,e,f){console.log(d+" - page loaded"),a.html(c),K(a),ba(),aa(q.settings.initialise_javascript_dependencies),H(b,e,a),window.history.pushState("string","Title",l),r=!1,v=!0},Y=function(a){var b=P(a);n=F(b)},Z=function(a){a=a.replace("#","/");var b=P(a),c=F(b);return c.id},$=function(){if(0!=x.find(".ajax-box").length){var a=x.find(".ajax-box");u=!1,G(o,!0,a)}},_=function(a){for(var b,c=0;c<m.length;c++){var d=m[c].parentID;d==n.id&&m[c].sort==a&&(b=m[c])}return b},aa=function(a){a&&a()},ba=function(){a("a").each(function(){var b=a(this);b.hasClass("ajax-link")&&(b.hasClass("ajax-active")||(b.addClass("ajax-active"),b.add_click_function()))})},ca=function(a){"back"==a&&0!=n&&n--,"next"==a&&n<f&&n++},da=function(a){k=a,s=!0,t=!0},ea=function(a,b){return Z(a)==Z(b)};a.fn.add_click_function=function(b){return this.each(function(){a(this).on("click",function(b){b.preventDefault();var c=a(this).attr("href");if(!ea(window.location.href,c)){da(c);var d=a("body").scrollTop();d>0?a("body").animate({scrollTop:"0px"},d/2,function(){z()}):z()}})})},a.fn.add_click_navigation=function(b){return this.each(function(){a(this).on("click",function(b){b.preventDefault(),ca(a(this).attr("direction")),da(a(this).attr("href")),z()})})},a.fn.css_animation_event_listener=function(b){return this.each(function(){a(this).bind("oanimationend animationend webkitAnimationEnd",function(){b.removeClass("running"),a(this).remove(),aa(q.settings.end_animation_callback),U()})})};var fa=function(a,b,c,d,e,f){var g={};return g.id=a,g.sort=b,g.parentID=c,g.className=d,g.name=P(f),g.title=e,g.link=f,g};q.init()},String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)},a.fn.ajax_plugin=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.ajax_plugin(this,b);a(this).data(d,c)}})}}(jQuery,document,window),function(a,b,c){"use strict";var d="app_name",e=678401;a.app_name=function(b,c){var f={required:!0},g=this,h=e;g.settings={};var i=a(b),b=b,j=i.data(d+"-opts");g.init=function(){g.settings=a.extend({},f,c,j),console.log("initialised plugin "+d+" -- "+h)},g.foo_public_method=function(){};a.fn.bind_event=function(a){},g.init()},a.fn.app_name=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.app_name(this,b);a(this).data(d,c)}})}}(jQuery,document,window),function(a,b,c){"use strict";var d="image_pre_loader",e=312584;a.image_pre_loader=function(b,c){var f={required:!0},g=this,h=e;g.settings={};var i=a(b),b=b,j=i.data(d+"-opts");g.init=function(){g.settings=a.extend({},f,c,j),console.log("initialised plugin "+d+" -- "+h),a(window).on("load",function(){console.log("loaded"),g.swap_images()})},g.swap_images=function(){var b=i.find("img");b.each(function(){a(this).attr("src",a(this).attr("pre"))})};a.fn.bind_event=function(a){},g.init()},a.fn.image_pre_loader=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.image_pre_loader(this,b);a(this).data(d,c)}})}}(jQuery,document,window),function(a,b,c){"use strict";function d(b,c){console.log(h+" activated"),this.$el=a(b),this.$el.data(h,this),this.defaults={required:!0};var d=this.$el.data(h+"-opts");this.opts=a.extend(this.defaults,c,d),this.init()}var e,f,g,h="plugin name";d.prototype.init=function(){e=this,f=e.$el,g=e.defaults},a.fn.plugin_name=function(a){return this.each(function(){new d(this,a)})}}(jQuery,document,window);