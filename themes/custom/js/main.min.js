!function(a,b,c){"use strict";var d="ajax_plugin_version_2.0";a.ajax_plugin=function(b,c){var e,f,g,h,i,j,k,l,m,n,o,p={ajax_link_class:"ajax-link",ajax_container:"ajax-container",animation_layer:"animation-layer",source_id:"ajax-source",animation_enter:"anim-enter",animation_leave:"anim-leave",plugin_page_class_name:"Unit",birds_nest_class:"birds-nest",initialise_javascript_dependencies:null,load_page_callback:null,page_loaded_callback:null,start_animation_callback:null,end_animation_callback:null,child_list:null,nav_next_frame:null,nav_prev_frame:null,url:null,abs_link:null,root:null,freezable_content:[]},q=this,r=!1,s=!1,t=!1,u=!0,v=[];q.settings={};var w=a(b),b=b,x=w.data(d+"-opts");q.init=function(){q.settings=a.extend({},p,c,x),console.log("initialised plugin "+d),w.css("position","relative"),Y(),i=a("."+q.settings.ajax_container),q.settings.child_list?K():console.log("no child list found"),y()},q.get_current_index=function(){return l};var y=function(){t&&(n=o),o=B(),t&&(o.previous_page=o),A(o),z()},z=function(){if(v.length>0){var a=v.length-1;I(v[a]),v.pop()}},A=function(a){if(1==a.nest){A(W(a));var b=a.urlSegment+"-"+a.id;console.log(b),v.push(ca(a,b,!0))}else v.push(ca(a,i.attr("id"),!0))},B=function(){var a,b=t?j:window.location.href;m=ba(b);for(var c=0;c<k.length;c++){var d=k[c];if(m.path_url==d.url_object.path_url){a=d,console.log("Page Found");break}}return a},C=function(a){for(var b=window.location.href,c="",d=q.settings.root,e=F(b),f=0;f<e.length&&(c+=e[f]+"/",e[f]!=d);f++);return Q(c)+a.hash_url},D=function(a,b){for(var c="",d=q.settings.root,e=a.components,f=!1,g=0;g<e.length;g++)f&&(c+=e[g]+"/"),e[g]==d&&(f=!0);var h=b?"#":"/";return h+Q(c)},E=function(a){for(var b="",c=q.settings.root,d=a.components,e=0;e<d.length&&(b+=d[e]+"/",d[e]!=c);e++);return Q(b)},F=function(a){return a=a.replace("#",""),a.split("/")},G=function(a){for(var b=q.settings.root,c=a.tempURL.split("/"),d=-1,e=c.length-1;e>=0&&(d++,c[e]!=b);e--);return d},H=function(a){for(var b=null,c=0;c<k.length;c++)a==k[c].name&&(b=k[c]);return b},I=function(b){var c=b.page.link,d=b.animate,e=a("#"+b.containerID);console.log("load url:- "+c),console.log("container:- "+e.attr("class")),t=!1,T(),X(q.settings.load_page_callback);var f=e.find("."+q.settings.animation_layer);f.removeClass("style"),a.ajax(c).done(function(a){X(q.settings.page_loaded_callback),U(e,f,a,d,c)}).fail(function(a){alert("Error: "+a.responseText)})},J=function(a,b,c){X(q.settings.start_animation_callback),S();var d=c.find("."+q.settings.animation_leave),e=c.find("."+q.settings.animation_enter),f=c.find("."+q.settings.animation_layer);if(f.addClass("running"),b){var g=parseInt(a.attr("sort")),h=parseInt(e.attr("sort")),i=c.find(".trans-page-info").attr("inc"),j=c.find(".trans-page-info").attr("dec");console.log("previous_sort_value: "+g),console.log("current_sort_value: "+h);var k=g<h?i:j;f.addClass(k)}else f.addClass("no-animation");d.attr("style",a.attr("style")),e.attr("style",a.attr("style")),d.html(a.html()),d.css_animation_event_listener(f)},K=function(){e=q.settings.child_list.find("li"),f=e.length;var b=q.settings.child_list;k=[],b.find("li").each(function(){var b=a(this);k.push(aa(b.attr("pageID"),b.index()+1,b.attr("parentID"),b.attr("className"),b.attr("title"),Q(b.attr("link")),b.attr("nest"),b.attr("segment")))}),L()},L=function(){for(var a=0;a<k.length;a++){var b=k[a];if(0!=b.parentID)for(var c=0;c<k.length;c++){var d=k[c];b.parentID==d.id&&(b.container=d.urlSegment+"-"+d.id)}}},M=function(){setTimeout(function(){a("."+q.settings.ajax_container);a(".animation-layer").css({width:"100%",height:"auto",top:0,left:0})},100)},N=function(a){var b=l;g=a.find("."+q.settings.nav_next_frame),h=a.find("."+q.settings.nav_prev_frame),g.add_click_navigation(),h.add_click_navigation(),O(),0==b&&h.css("display","none"),b==f-1&&g.css("display","none"),h.attr("href",e.eq(b-1).attr("link")),g.attr("href",e.eq(b+1).attr("link"))},O=function(){h.css("display","block"),g.css("display","block")},P=function(a){return a=Q(a),a.substr(a.lastIndexOf("/")+1)},Q=function(a){return"/"==a.substr(-1)&&(a=a.substr(0,a.length-1)),a},R=function(){console.log(d+" - animation finished"),z(),M()},S=function(){console.log(d+" - start animation")},T=function(){console.log(d+" - loading page"),r=!0},U=function(a,b,c,e,f){console.log(d+" - page loaded"),a.html(c),N(a),Y(),X(q.settings.initialise_javascript_dependencies),J(b,e,a),window.history.pushState("string","Title",o.url_object.http_url),r=!1,u=!0},V=function(a){a=a.replace("#","/");var b=P(a),c=H(b);return c.id},W=function(a){for(var b,c=0;c<k.length;c++){var d=k[c].parentID;d==a.id&&1==k[c].sort&&(b=k[c])}return b},X=function(a){a&&a()},Y=function(){a("a").each(function(){var b=a(this);b.hasClass("ajax-link")&&(b.hasClass("ajax-active")||(b.addClass("ajax-active"),b.add_click_function()))})},Z=function(a){"back"==a&&0!=l&&l--,"next"==a&&l<f&&l++},$=function(a){j=a,s=!0,t=!0},_=function(a,b){return V(a)==V(b)};a.fn.add_click_function=function(b){return this.each(function(){a(this).on("click",function(b){b.preventDefault();var c=a(this).attr("href");if(!_(window.location.href,c)){$(c);var d=a("body").scrollTop();d>0?a("body").animate({scrollTop:"0px"},d/2,function(){y()}):y()}})})},a.fn.add_click_navigation=function(b){return this.each(function(){a(this).on("click",function(b){b.preventDefault(),Z(a(this).attr("direction")),$(a(this).attr("href")),y()})})},a.fn.css_animation_event_listener=function(b){return this.each(function(){a(this).bind("oanimationend animationend webkitAnimationEnd",function(){b.removeClass("running"),a(this).remove(),X(q.settings.end_animation_callback),R()})})};var aa=function(a,b,c,d,e,f,g,h){var i={};return i.id=a,i.sort=b,i.parentID=c,i.className=d,i.name=P(f),i.title=e,i.link=f,i.nest=g,i.urlSegment=h,i.url_object=ba(f),i},ba=function(a){var b={};return b.tempURL=Q(a),b.name=P(b.tempURL),b.components=F(b.tempURL),b.levelsAboveRoot=G(b),b.base_url=E(b),b.path_url=D(b,!1),b.hash_url=D(b,!0),b.http_url=C(b),b},ca=function(a,b,c){var d={};return d.animate=c,d.page=a,d.containerID=b,d};q.init()},String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)},a.fn.ajax_plugin=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.ajax_plugin(this,b);a(this).data(d,c)}})}}(jQuery,document,window),function(a,b,c){"use strict";var d="app_name",e=678401;a.app_name=function(b,c){var f={required:!0},g=this,h=e;g.settings={};var i=a(b),b=b,j=i.data(d+"-opts");g.init=function(){g.settings=a.extend({},f,c,j),console.log("initialised plugin "+d+" -- "+h)},g.foo_public_method=function(){};a.fn.bind_event=function(a){},g.init()},a.fn.app_name=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.app_name(this,b);a(this).data(d,c)}})}}(jQuery,document,window),function(a,b,c){"use strict";var d="image_pre_loader",e=312584;a.image_pre_loader=function(b,c){var f={required:!0},g=this,h=e;g.settings={};var i=a(b),b=b,j=i.data(d+"-opts");g.init=function(){g.settings=a.extend({},f,c,j),console.log("initialised plugin "+d+" -- "+h),a(window).on("load",function(){console.log("loaded"),g.swap_images()})},g.swap_images=function(){var b=i.find("img");b.each(function(){a(this).attr("src",a(this).attr("pre"))})};a.fn.bind_event=function(a){},g.init()},a.fn.image_pre_loader=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.image_pre_loader(this,b);a(this).data(d,c)}})}}(jQuery,document,window),function(a,b,c){"use strict";function d(b,c){console.log(h+" activated"),this.$el=a(b),this.$el.data(h,this),this.defaults={required:!0};var d=this.$el.data(h+"-opts");this.opts=a.extend(this.defaults,c,d),this.init()}var e,f,g,h="plugin name";d.prototype.init=function(){e=this,f=e.$el,g=e.defaults},a.fn.plugin_name=function(a){return this.each(function(){new d(this,a)})}}(jQuery,document,window);